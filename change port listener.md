#  Change database ports on a Learn instance installed on Oracle

1. Stop the Oracle listener using the following command:
```
[oracle@vt2-stag-oracle01 admin]$ lsnrctl stop

[oracle@vt2-stag-oracle01 admin]$ lsnrctl status

LSNRCTL for Linux: Version 11.2.0.3.0 - Production on 28-DEC-2018 17:02:42

Copyright (c) 1991, 2011, Oracle.  All rights reserved.

Connecting to (DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(HOST=vt2-stag-oracle01)(PORT=1521)))
TNS-12541: TNS:no listener
 TNS-12560: TNS:protocol adapter error
  TNS-00511: No listener
   Linux Error: 111: Connection refused
Connecting to (DESCRIPTION=(ADDRESS=(PROTOCOL=IPC)(KEY=EXTPROC1521)))
TNS-12541: TNS:no listener
 TNS-12560: TNS:protocol adapter error
  TNS-00511: No listener
   Linux Error: 2: No such file or directory
   
```

2. Change the port number in the Oracle listener.ora file. For example, from the default port 1522 to 1521.
```
From: 
(ADDRESS = (PROTOCOL = TCP)(HOST = vt2-stag-oracle01)(PORT = 1522))
To:
(ADDRESS = (PROTOCOL = TCP)(HOST = vt2-stag-oracle01)(PORT = 1521))
```
3. Change the port number in the tnsnames.ora file as in the following example,where host_name is your host name and server_name is your server name.
```
From:
# tnsnames.ora Network Configuration File: /u01/app/oracle/product/11.2.0/db_1/network/admin/tnsnames.ora
# Generated by Oracle configuration tools.

LISTENER_ORCL =
  (ADDRESS = (PROTOCOL = TCP)(HOST = vt2-stag-oracle01)(PORT = 1522))


ORCL =
  (DESCRIPTION =
    (ADDRESS = (PROTOCOL = TCP)(HOST = vt2-stag-oracle01)(PORT = 1522))
    (CONNECT_DATA =
      (SERVER = DEDICATED)
      (SERVICE_NAME = orcl)
    )
  )
To:
# tnsnames.ora Network Configuration File: /u01/app/oracle/product/11.2.0/db_1/network/admin/tnsnames.ora
# Generated by Oracle configuration tools.

LISTENER_ORCL =
  (ADDRESS = (PROTOCOL = TCP)(HOST = vt2-stag-oracle01)(PORT = 1521))


ORCL =
  (DESCRIPTION =
    (ADDRESS = (PROTOCOL = TCP)(HOST = vt2-stag-oracle01)(PORT = 1521))
    (CONNECT_DATA =
      (SERVER = DEDICATED)
      (SERVICE_NAME = orcl)
    )
  )
```
4. Restart the Oracle listener using the following command:
```
[oracle@vt2-stag-oracle01 admin]$ lsnrctl start
```
5. Change the port to which the database is listening:
```
[oracle@vt2-stag-oracle01 admin]$ sqlplus / as sysdba

SQL*Plus: Release 11.2.0.3.0 Production on Fri Dec 28 17:04:09 2018

Copyright (c) 1982, 2011, Oracle.  All rights reserved.


Connected to:
Oracle Database 11g Enterprise Edition Release 11.2.0.3.0 - 64bit Production
With the Partitioning, OLAP, Data Mining and Real Application Testing options

SQL> alter system set LOCAL_LISTENER="(ADDRESS=(PROTOCOL=TCP)(HOST=vt2-stag-oracle01)(PORT=1521))";

System altered.

SQL>  alter system register;

System altered.
```
6. Refferent:
https://help.blackboard.com/fr-fr/Learn/Administrator/Hosting/Databases/Database_Ports_Oracle